<div class="dt_container">
    <div class="dt_header">
        <div class="dt_title">Welcome to Our Loan Calculator</div>
        <div class="dt_description">Find out the maximum loan you can afford based on your monthly salary and expenses.</div>
    </div>
    <div class="dt_inputCard">
        <h1>Loan Info</h1>
        <div>
            <label for="dt_salary">Monthly Salary:</label>
            <input type="number" id="dt_salary" onkeyup="dt_calculateAffordableLoan()">
        </div>
        <div>
            <label for="dt_fees">Other Monthly Fees:</label>
            <input type="number" id="dt_fees" onkeyup="dt_calculateAffordableLoan()">
        </div>
        <div id="dt_interestRate">
            <label for="dt_interest">Interest Rate:</label>
            <input type="number" id="dt_interest" onkeyup="dt_calculateAffordableLoan()">
        </div>
        <div id="dt_monthlyPayment"></div>
    </div>
    <div class="dt_results" id="dt_result"></div>
    <div class="dt_linkToBlog">
        <a href="https://al-mindhar.com/prixdem" class="dt_linkButton">Price of mÂ² map</a>
    </div>
</div>

<style>
    .dt_container {
        font-family: 'Montserrat', sans-serif;
        background-color: #ffffff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        max-width: 100%;
        flex-direction: column;
        gap: 20px;
    }

    .dt_header {
        text-align: center;
        margin-bottom: 15px;
    }

    .dt_title {
        font-size: 24px;
        margin-bottom: 8px;
        color: #004272;
    }

    .dt_description {
font-size: 18px;
        margin-bottom: 16px;
    }

    h1 {
        text-align: center;
        margin-bottom: 25px;
    }

    label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
    }

    input {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #004272;
        border-radius: 4px;
    }

    #dt_monthlyPayment {
        font-weight: bold;
        margin-top: 10px;
        color: #004272;
    }

    .dt_results {
        display: grid;
        grid-template-columns: repeat(2, 1fr); /* 2 cards per row for desktop */
        gap: 15px;
        margin-top: 30px;
    }

    .dt_loanCard {
        padding: 10px;
        border: 1px solid #004272;
        border-radius: 4px;
        transition: transform 0.3s;
    }

    .dt_loanCard:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
    }

    .dt_linkToBlog {
        text-align: center;
        margin-top: 45px;
    }

    .dt_linkButton {
        background-color: #004272;
        padding: 10px 20px;
        color: white;
        border-radius: 4px;
        text-decoration: none;
        font-weight: bold;
    }

    .dt_linkButton:hover {
        background-color: #002a48;
        color: white !important;
    }

    /* Mobile Responsive Adjustments */
    @media screen and (max-width: 767px) {
        .dt_container {
            padding: 20px;
        }

        .dt_results {
            grid-template-columns: 1fr; /* Cards will take full width in mobile view */
        }
    }
</style>

<script>

    function dt_initCards() {
        const loanTerms = [5, 7, 10, 15, 20, 25];
        const resultContainer = document.getElementById('dt_result');
        loanTerms.forEach(term => {
            const card = dt_createLoanCard(term, 0);
            resultContainer.appendChild(card);
        });
    }

    function dt_calculateAffordableLoan() {
        const monthlySalary = parseFloat(document.getElementById('dt_salary').value) || 0;
        const monthlyFees = parseFloat(document.getElementById('dt_fees').value) || 0;
        const dt_interestRate = parseFloat(document.getElementById('dt_interest').value)/100 || 0.11;
        const disposableIncome = monthlySalary - monthlyFees;
        const maxMonthlyPayment = disposableIncome * 0.3;
        document.getElementById('dt_monthlyPayment').textContent = `Possible Monthly Payment: ${maxMonthlyPayment.toFixed(2)} DT`;
        const loanTerms = [5, 7, 10, 15, 20, 25];
        loanTerms.forEach((term, index) => {
            const principal = dt_calculatePrincipal(maxMonthlyPayment, term, dt_interestRate);
            document.querySelectorAll('.dt_loanCard')[index].querySelector('span').textContent = `${principal.toFixed(2)} DT`;
        });
    }

    function dt_calculatePrincipal(payment, years, rate) {
        const r = rate / 12;
        const n = years * 12;
        const principal = payment * ((Math.pow((1 + r), n) - 1) / (r * Math.pow((1 + r), n)));
        return principal;
    }

    function dt_createLoanCard(years, principal) {
    const card = document.createElement('div');
    card.className = 'dt_loanCard';
    const heading = document.createElement('h3');
    heading.textContent = `${years} Years`;
    
    const label = document.createElement('p');
    label.textContent = 'Maximum Loan: ';
    
    const amount = document.createElement('span');
    amount.textContent = ` ${principal.toFixed(2)} DT`;

    // Apply CSS styles to format the label and amount
    amount.style.fontWeight = 'light';
    amount.style.fontSize = '18px';

    card.appendChild(heading);
    card.appendChild(label);
    label.appendChild(amount);
    return card;
    }

    document.getElementById('dt_salary').addEventListener('input', dt_calculateAffordableLoan);
    document.getElementById('dt_fees').addEventListener('input', dt_calculateAffordableLoan);
    dt_initCards();
</script>